{{define "content"}}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow-sm border-warning">
            <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                <h4 class="mb-0">📖 Page - 構造化台本からページ構成</h4>
                <span class="badge bg-dark">MangaResponse JSON Mode</span>
            </div>
            <div class="card-body">
                <form action="/generate" method="POST">
                    <input type="hidden" name="command" value="page">

                    <div class="mb-3">
                        <label class="form-label fw-bold">MangaResponse JSON (台本データ)</label>
                        <textarea name="input_text" class="form-control font-monospace" rows="20"
                                  placeholder='{
  "title": "鋼鉄のオーケストレーター",
  "description": "技術解説漫画の第一話なのだ",
  "panels": [
    {
      "page": 1,
      "visual_anchor": "90s retro anime style, Metan looking at screen",
      "dialogue": "これが次世代の工廠よ。",
      "speaker_id": "metan",
      "reference_url": "gs://bucket/assets/metan_design.png"
    }
  ]
}' required></textarea>

                        <div class="alert alert-info mt-3 py-3 shadow-sm">
                            <div class="fw-bold mb-2">
                                <i class="bi bi-diagram-3"></i> 💡 構造体定義（MangaResponse / Panel）の解説:
                            </div>
                            <ul class="mb-0 small" style="line-height: 1.6;">
                                <li><code>title / description</code> — 漫画の全体情報を定義するのだ。</li>
                                <li><code>panels[]</code> — 1つ1つのコマ（パネル）の配列なのだ。</li>
                                <li><code>page</code> — そのパネルが何ページ目に属するかを指定するのだ。</li>
                                <li><code>visual_anchor</code> — 画像生成時の核となるプロンプト指示なのだ。</li>
                                <li><code>speaker_id</code> — 話者を特定し、キャラクターの一貫性を保つDNAIDなのだ。</li>
                                <li><code>reference_url</code> — Image-to-Image等の参照元画像パスを指定できるのだ。</li>
                            </ul>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">生成モード (Execution Mode)</label>
                            <select name="mode" class="form-select">
                                <option value="standard" selected>標準 (Standard)</option>
                                <option value="precise">詳細レイアウト (Precise)</option>
                                <option value="re-generate">画像再生成 (Re-generate)</option>
                            </select>
                            <div class="form-text">JSONを書き換えて特定のパネルだけ再生成することも可能なのだ。</div>
                        </div>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-warning btn-lg text-dark fw-bold border-2 shadow-sm">
                            <i class="bi bi-file-earmark-code"></i> 台本データを注入して錬成開始なのだ！
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    .font-monospace {
        font-family: 'Fira Code', 'Cascadia Code', monospace;
        background-color: #1e1e1e;
        color: #d4d4d4;
        line-height: 1.5;
        padding: 1.5rem;
    }
</style>
{{end}}
